#!/bin/bash

# --- CONFIGURATION ---
REPO_NAME="business_mandates_2026"
BASE_PATH="$HOME/storage/documents/S24U_SentinelVault/AIMS-S24U/$REPO_NAME"

# Prompt for GitHub Username
echo "--- GitHub Repository Setup ---"
read -p "Enter your GitHub Username: " GITHUB_USER

if [ -z "$GITHUB_USER" ]; then
   echo "Error: GitHub Username is required."
   exit 1
fi

echo "Creating repository at: $BASE_PATH"
mkdir -p "$BASE_PATH"
cd "$BASE_PATH" || exit

# ==========================================
# PHASE 1: EXECUTIVE & DASHBOARD
# ==========================================

echo "Generating Artifact 0: Master Dashboard..."
cat > Master_Compliance_Dashboard.md << 'EOF'
# Master Compliance Dashboard (California 2026)
**Employer Name**: __________________________
**Date**: __________________
**Reviewer**: ______________________

## 1. Business Profile & Applicability
- [ ] **1-4 Employees**: Basic mandates (Postings, Pay, Safety).
- [ ] **5-14 Employees**: + Harassment Training, CFRA.
- [ ] **15-49 Employees**: + Pay Scale Disclosure.
- [ ] **50-99 Employees**: + FMLA, Cal/OSHA IIPP, Cal-WARN.
- [ ] **100+ Employees**: + Pay Data Reporting (SB 1162).

## 2. Compliance Categories Snapshot
| Category | Artifact | Status |
| :--- | :--- | :--- |
| **1. Harassment Prevention** | [Artifact 1] | |
| **2. Workplace Violence (SB 553)** | [Artifact 2] | |
| **3. Employee Notices (SB 294)** | [Artifact 3] | |
| **4. Postings & Notices** | [Artifact 4] | |
| **5. Contracts (AB 692)** | [Artifact 5] | |
| **6. Leave Administration** | [Artifact 6/7] | |
| **7. Personnel Records** | [Artifact 9] | |
| **8. Wage & Hour** | [Artifact 10] | |
| **9. Immigration (I-9)** | [Artifact 11] | |
| **10. Pay Data (SB 1162)** | [Artifact 12] | |
| **11. Safety (Cal/OSHA)** | [Artifact 13] | |
| **12. Benefits** | [Artifact 14] | |
| **13. Hiring & Recruitment** | [Artifact 20] | |
| **14. Termination** | [Artifact 16] | |

## 3. Priority Action Plan (Q1 2026)
- [ ] **By Jan 1**: Update Minimum Wage rates ($16.50+).
- [ ] **By Jan 15**: Audit "Stay-or-Pay" clauses.
- [ ] **By Feb 1**: Distribute **SB 294 Notice**.
- [ ] **By Mar 30**: Implement "Emergency Contact for Arrest".
- [ ] **By May 13**: File Pay Data Report (100+).
EOF

# ==========================================
# PHASE 2: CORE MANDATES
# ==========================================

echo "Generating Core Mandates (Artifacts 1-5)..."

cat > California_Harassment_Prevention_Compliance_Checklist.md << 'EOF'
# California Harassment Prevention Compliance Checklist (2026)
**Applicability**: 5+ employees for training.

## 1. Training (SB 1343)
- [ ] **Supervisors**: 2 hours every 2 years.
- [ ] **Staff**: 1 hour every 2 years.
- [ ] **New Hires**: Within 6 months.

## 2. Policy (2 CCR § 11023)
- [ ] Written policy distributed to all staff.
- [ ] Bystander intervention training included.

## 3. CROSS-REFERENCE
- **Leave**: Retaliation prohibited.
- **Records**: Metadata fields required (SB 513).
- **Violence**: Threats can be harassment.
EOF

cat > California_Workplace_Violence_Prevention_Plan_Checklist.md << 'EOF'
# California Workplace Violence Prevention Plan (SB 553)
**Effective**: July 1, 2024

## 1. Written Plan
- [ ] Standalone or IIPP section.
- [ ] Employee involvement required.

## 2. Incident Log
- [ ] Separate from OSHA 300.
- [ ] NO personal identifying info.
- [ ] Retention: 5 years.

## 3. CROSS-REFERENCE
- **Harassment**: Overlapping reporting.
- **Workers' Comp**: Injury claims.
EOF

cat > California_SB294_Know_Your_Rights_Checklist.md << 'EOF'
# California SB 294 "Know Your Rights" Checklist (2026)
**Deadline**: Feb 1, 2026

## 1. Mandatory Notice
- [ ] Distribute to all employees.
- [ ] Covers: Workers' Comp, Immigration (AB 450), Union Rights.

## 2. Emergency Contact (Arrest)
- [ ] Implement system by Mar 30, 2026.

## 3. CROSS-REFERENCE
- **Immigration**: 72-hr notice of ICE audits.
- **Records**: Contact info stored in Container 5.
EOF

cat > California_Posting_Notice_Requirements_Checklist.md << 'EOF'
# California Posting Requirements Checklist (2026)

## 1. Mandatory Posters
- [ ] Min Wage ($16.50+), Payday Notice, Cal/OSHA, Workers' Comp.
- [ ] IWC Wage Order (Industry specific).

## 2. Federal
- [ ] FLSA, EEOC, EPPA.
- [ ] FMLA (50+ Only).

## 3. CROSS-REFERENCE
- **Harassment**: DFEH-185 poster required (5+).
EOF

cat > California_AB692_Stay_Or_Pay_Prohibition_Checklist.md << 'EOF'
# California AB 692 "Stay-or-Pay" Prohibition (2026)

## 1. Prohibited Clauses
- [ ] Training repayment (generally void).
- [ ] Recruiting fees.
- [ ] "Quit fees".

## 2. Exceptions
- [ ] Must meet 7 strict criteria (Separate agreement, 5-day consult, actual cost).

## 3. CROSS-REFERENCE
- **Harassment**: Training costs are employer burden.
- **Hiring**: Offer letters must be clean.
EOF

# ==========================================
# PHASE 3: LEAVE ADMINISTRATION
# ==========================================

echo "Generating Leave Checklists (Artifacts 6-8)..."

cat > California_Leave_Checklist_1_to_49_Employees.md << 'EOF'
# California Leave Checklist (1-49 Employees)
**No FMLA**

## 1. Mandatory Leaves
- [ ] PDL (Pregnancy): Up to 4 months.
- [ ] CFRA (Family/Bonding): 12 weeks (5+).
- [ ] Sick Leave: 40 hours/5 days.
- [ ] Bereavement/Repro Loss: 5 days.

## 2. CROSS-REFERENCE
- **Harassment**: No retaliation.
- **Records**: Medical certs in Container 2.
EOF

cat > California_Leave_Checklist_50_to_100_Employees.md << 'EOF'
# California Leave Checklist (50-100 Employees)
**Includes FMLA**

## 1. FMLA Overlay
- [ ] FMLA (Federal) runs concurrent with PDL.
- [ ] CFRA runs concurrent with FMLA (unless pregnancy).

## 2. CROSS-REFERENCE
- **Records**: FMLA forms in Container 2.
- **Workers' Comp**: Designate WC as FMLA.
EOF

cat > Cross_Reference_Section_Example.md << 'EOF'
# Cross-Reference Template
1. **Legal Principle**: Summary.
2. **Compliance Impact**: Action items.
3. **Statutory Basis**: Citation.
EOF

# ==========================================
# PHASE 4: OPERATIONS & RECORDS
# ==========================================

echo "Generating Operations Artifacts (9-14)..."

cat > California_Personnel_Records_Compliance_Checklist.md << 'EOF'
# California Personnel Records Audit (2026)
**Mandates**: SB 513, SB 464

## 1. The Container System
- [ ] **Container 1**: General (Performance).
- [ ] **Container 2**: Medical (Confidential).
- [ ] **Container 3**: I-9 Immigration.
- [ ] **Container 4**: Payroll.
- [ ] **Container 5**: Investigative (Privileged).
- [ ] **Container 6**: Pay Data (SB 464).

## 2. SB 513 Training Records
- [ ] Metadata: Name, Provider, Date, **Core Competencies**, Cert.
- [ ] Retention: 3 years post-term.
EOF

cat > California_Wage_and_Hour_Compliance_Checklist.md << 'EOF'
# California Wage & Hour Checklist (2026)

## 1. Minimum Wage
- [ ] State: $16.50/hr.
- [ ] Local: Check LA City/County.
- [ ] Exempt Salary: 2x State Min Wage.

## 2. Breaks
- [ ] Meal: 30m unpaid (before 5th hr).
- [ ] Rest: 10m paid (every 4 hrs).
- [ ] Penalty: 1 hr pay.

## 3. Wage Statements
- [ ] Must contain 9 mandatory items + Sick Balance.
EOF

cat > California_Immigration_Compliance_Checklist.md << 'EOF'
# California I-9 & Immigration Checklist (2026)

## 1. Form I-9
- [ ] Use 08/01/23 edition.
- [ ] Section 1 by Day 1; Section 2 by Day 3.

## 2. AB 450 (CA)
- [ ] Require judicial warrant for ICE entry.
- [ ] 72-hr notice to staff if ICE audits.
EOF

cat > California_Pay_Data_Transparency_Checklist.md << 'EOF'
# California Pay Transparency (2026)

## 1. Disclosure (15+)
- [ ] Pay scale in ALL job postings.
- [ ] Provide scale to employees upon request.

## 2. Reporting (100+)
- [ ] Annual filing (May).
- [ ] SB 464: Segregate demographic data.
EOF

cat > California_CalOSHA_Safety_Compliance_Checklist.md << 'EOF'
# California Cal/OSHA Safety Checklist (2026)

## 1. IIPP
- [ ] Written plan with 8 elements.
- [ ] Accessible to staff.

## 2. Heat Illness
- [ ] Outdoor and Indoor (>82°F) standards.
- [ ] Lactation Accommodation (SB 142) facility rules.
EOF

cat > California_Benefits_Administration_Matrix.md << 'EOF'
# California Benefits Matrix (2026)

## 1. Mandatory
- [ ] Sick Leave: 40 hrs / 5 days.
- [ ] CalSavers: Mandatory if no 401k.
- [ ] Workers' Comp: 100% Employer paid.

## 2. Protected Leave
- [ ] PDL, CFRA, Jury Duty, Voting, Bereavement.
EOF

# ==========================================
# PHASE 5: GAPS & LIFECYCLE (NEW)
# ==========================================

echo "Generating Gap Analysis Artifacts (15-20)..."

cat > California_Independent_Contractor_Analysis_Checklist.md << 'EOF'
# California Independent Contractor Analysis (AB 5)
**Presumption**: Everyone is an EMPLOYEE.

## 1. ABC Test
- [ ] A. Free from control.
- [ ] B. Work outside usual course of business.
- [ ] C. Customarily engaged in independent trade.

## 2. B2B Exception
- [ ] Must meet 12-factor Borello/B2B test if ABC fails.
EOF

cat > California_Termination_and_Offboarding_Checklist.md << 'EOF'
# California Termination & Offboarding (2026)

## 1. Final Pay
- [ ] **Fired**: Pay Immediately.
- [ ] **Resign (72+ hrs)**: Pay on last day.
- [ ] **Resign (<72 hrs)**: Pay within 72 hours.

## 2. Mandatory Paperwork
- [ ] Change in Relationship Notice.
- [ ] EDD Brochure (DE 2320).
- [ ] HIPP Notice / COBRA.
EOF

cat > California_Remote_Work_and_Expense_Checklist.md << 'EOF'
# California Remote Work & Expenses (2026)
**Lab Code 2802**

## 1. Reimbursements
- [ ] Personal Cell: Reasonable percentage.
- [ ] Home Internet: Reasonable percentage (if remote required).
- [ ] Mileage: IRS Rate.

## 2. Timekeeping
- [ ] Strict tracking of hours/breaks for remote staff.
EOF

cat > California_Lactation_Accommodation_Checklist.md << 'EOF'
# California Lactation Accommodation (SB 142)

## 1. Facility
- [ ] Private (NOT a bathroom).
- [ ] Shielded, seat, surface, electricity.
- [ ] Sink with running water + Fridge access.

## 2. Policy
- [ ] Break time (can be unpaid if exceeds rest break).
- [ ] Written policy in handbook.
EOF

cat > California_CalWARN_Mass_Layoff_Checklist.md << 'EOF'
# California Mass Layoff (Cal-WARN)

## 1. Triggers
- [ ] Layoff of 50+ employees in 30 days.
- [ ] Relocation 100+ miles.
- [ ] Termination of operations.

## 2. Notice
- [ ] 60 Days Notice required.
- [ ] Notify: Employees, EDD, Local Gov, Chief Elected Official.
EOF

cat > California_Recruitment_and_Hiring_Checklist.md << 'EOF'
# California Recruitment & Hiring (2026)

## 1. Postings
- [ ] Pay Scale included (15+).
- [ ] No discriminatory language.

## 2. Application
- [ ] **Ban the Box**: No criminal history questions.
- [ ] **Salary History**: Do not ask prior salary.

## 3. Background Checks
- [ ] Only AFTER conditional offer.
- [ ] Fair Chance Act assessment required.

## 4. Cannabis (AB 2188)
- [ ] No testing for non-psychoactive metabolites.
- [ ] No inquiry into past use.
EOF

# ==========================================
# PHASE 6: GIT INITIALIZATION
# ==========================================

echo "Initializing Git Repository..."
git init
git add .
git commit -m "Initial commit: California Compliance Toolkit 2026 (Artifacts 0-20)"
git branch -M main

# Configure remote using provided GitHub username
REMOTE_URL="https://github.com/$GITHUB_USER/$REPO_NAME.git"
git remote add origin "$REMOTE_URL"

echo ""
echo "✅ SUCCESS: All 21 artifacts generated in $BASE_PATH"
echo "✅ Git repository initialized."
echo ""
echo "--- FINAL STEP ---"
echo "1. Go to https://github.com/new"
echo "2. Create a PRIVATE repository named: $REPO_NAME"
echo "3. Run the following command:"
echo "   cd $BASE_PATH && git push -u origin main"